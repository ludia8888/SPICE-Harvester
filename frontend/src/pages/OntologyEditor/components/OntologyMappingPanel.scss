.ontology-mapping-panel {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: #1a1f2e;
  overflow: hidden;

  .panel-header {
    padding: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    flex-shrink: 0;

    h2 {
      margin: 0 0 10px 0;
      color: #fff;
    }

    .header-actions {
      margin-top: 10px;
    }
  }

  .mapping-content-wrapper {
    flex: 1;
    display: flex;
    gap: 20px;
    padding: 20px;
    overflow: hidden;
    min-height: 0; // Important for flex child scrolling

    .main-content {
      flex: 1;
      overflow-y: auto;
      padding-right: 10px;

      .target-selector {
        margin-bottom: 20px;
        
        h3 {
          margin: 0 0 10px 0;
        }
      }

      .mapping-suggestions {
        .source-field-card {
          margin-bottom: 15px;
          transition: all 0.2s ease;

          &:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
          }

          .field-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;

            .field-info {
              h4 {
                margin: 0;
                display: flex;
                align-items: center;
                gap: 8px;

                .bp5-icon {
                  color: #48aff0;
                }

                .bp5-tag {
                  margin-left: 8px;
                }
              }
            }
          }

          .mapping-content {
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);

            .suggestions-list {
              margin-bottom: 20px;

              h5 {
                margin: 0 0 10px 0;
                color: #8a9ba8;
                font-size: 12px;
                text-transform: uppercase;
              }

              .suggestion-item {
                padding: 10px;
                margin-bottom: 10px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 4px;
                border: 1px solid transparent;
                transition: all 0.2s ease;

                &:hover {
                  border-color: #48aff0;
                }

                .suggestion-header {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  margin-bottom: 8px;

                  .suggestion-info {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    flex: 1;

                    .bp5-icon {
                      color: #5c7080;
                    }

                    strong {
                      color: #f5f8fa;
                    }

                    .confidence-bar {
                      width: 100px;
                      height: 6px;
                      
                      .bp5-progress-meter {
                        transition: width 0.3s ease;
                      }
                    }
                  }
                }

                .suggestion-reasons {
                  display: flex;
                  gap: 5px;
                  flex-wrap: wrap;
                  margin-left: 24px;

                  .bp5-tag {
                    font-size: 11px;
                  }
                }
              }
            }

            .manual-mapping {
              h5 {
                margin: 0 0 10px 0;
                color: #8a9ba8;
                font-size: 12px;
                text-transform: uppercase;
              }
            }
          }
        }
      }
    }

    .sidebar {
      width: 300px;
      flex-shrink: 0;
      overflow-y: auto;
      max-height: 100%;

      .mapping-statistics {
        .bp5-card {
          margin-bottom: 20px;

          h3 {
            margin: 0 0 15px 0;
            font-size: 16px;
          }

          p {
            margin: 10px 0;
            color: #8a9ba8;
          }

          .stats-grid {
            display: grid;
            gap: 10px;
            margin-top: 15px;

            .stat {
              display: flex;
              align-items: center;
              gap: 8px;
              padding: 8px;
              background: rgba(255, 255, 255, 0.05);
              border-radius: 4px;

              .bp5-icon {
                font-size: 16px;
              }

              span {
                font-size: 13px;
                color: #f5f8fa;
              }
            }
          }

          .settings-item {
            margin-bottom: 15px;

            label {
              display: block;
              margin-bottom: 5px;
              color: #8a9ba8;
              font-size: 13px;
            }

            .bp5-html-select {
              width: 100%;
            }

            .bp5-switch {
              margin-top: 10px;
            }
          }
        }
      }
    }
  }

  .panel-footer {
    padding: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    background: rgba(0, 0, 0, 0.2);

    .footer-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
  }

  // Dark theme adjustments
  .bp5-dark & {
    .bp5-card {
      background: #293742;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .bp5-html-select select {
      background: #30404d;
      color: #f5f8fa;
    }

    .bp5-callout {
      background: rgba(72, 175, 240, 0.15);
    }

    .bp5-progress-bar {
      background: rgba(255, 255, 255, 0.1);
    }

    .bp5-tag {
      background: rgba(255, 255, 255, 0.1);
      
      &.bp5-intent-success {
        background: rgba(61, 204, 145, 0.2);
        color: #3dcc91;
      }

      &.bp5-intent-warning {
        background: rgba(255, 179, 0, 0.2);
        color: #ffb300;
      }
    }
  }

  // Scrollbar styling
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;

    &:hover {
      background: rgba(255, 255, 255, 0.15);
    }
  }
}