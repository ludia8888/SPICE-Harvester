[tox]
requires = tox>=4
env_list = backend-unit, backend-coverage

[testenv]
description = Run grouped backend tests via the root Makefile
package = skip
deps =
    -e backend/shared[test]
allowlist_externals = make
commands =
    make PYTHON={envpython} {envname}

[pytest]
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    unit: marks tests as unit tests
    integration: marks tests as integration tests
    requires_infra: tests that need local stack services (Postgres/Redis/MinIO)
    performance: marks tests as performance tests
    chaos: chaos/idempotency contract tests
    smoke: marks tests as basic service health and connectivity tests (fast, ~30s)
    workflow: marks tests as end-to-end user workflow tests (medium, ~2-5min each)
